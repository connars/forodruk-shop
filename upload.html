<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Фотодрук онлайн</title>

    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="./css/setting.css">
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/main.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css" />
    <link rel="stylesheet" href="./css/loader.css">
    <link rel="stylesheet" href="./css/upload.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropper/2.3.4/cropper.min.css">

</head>
<body>
    <div id="loader-wrapper" class="loader-wrapper">
        <div class="load-container">
          <div class="linespinner"></div>
        </div>
    </div>
    <header class="header" id="header" style="border-bottom: 2px solid rgb(206, 206, 206); background-color: white;">
        <div class="container">
            <div class="header__wrapper">
                <div class="header__left">
                    <a href="/">
                        LOGO
                    </a>
                </div>
                <div class="header__center">
                    ціни
                </div>
                <div class="header__right">
                    <a href="index.html">
                        <button  class="main-btn">На головну</button>
                    </a>
                </div>
            </div>
        </div>
    </header>
    <div class="m-header">
        <div class="burger">
            <span class="line line1"></span>
            <span class="line line2"></span>
        </div>
    </div>

    <style>
     .page {
	/* margin: 1em auto; */
	width: 100vw;
    padding: 0 20px;
	display: flex;
    gap: 20px;
	align-items: flex-start;
    flex-direction: column;
    justify-content: center;
    align-items: center;
	flex-wrap: wrap;
	height: 100%;
}

.box {
	padding: 0.5em;
	width: 100%;
	margin:0.5em;
}



.options label,
.options input{
	width:12em;
	padding:0.5em 1em;
}
.btn{
	cursor:pointer;
}

.hide {
	display: none;
}

img {
	max-width: 100%;
}

            </style>
    <hr class="header__line">
    <div class="firstscreen">
        
        <main class="page">
            <img src="./img/upload.svg" alt="">
            <h2>Додайте Ваше перше фото</h2>
            <!-- input file -->
            <div class="box">
                <input class="" type="file" id="file-input"/>
            </div>
            <!-- leftbox -->
            <div class="box-2">
                <div class="result"></div>
            </div>
            <!--rightbox-->
            <div class="box-2 img-result hide">
                <!-- result of crop -->
                <img class="cropped" src="" alt="">
            </div>
            <!-- input file -->
            <div class="box settings">
                <div class="options hide">
                    <label> Width</label>
                    <input type="number" class="img-w" value="300" min="100" max="1200" />
                </div>
                <div class="box-buttons">
                    <!-- save btn -->
                    <button class="btn save hide main-btn">Обрізати</button>
                    <!-- download btn -->
                    <a href="" class="btn download hide main-btn">Завантажити</a>
                    <!-- buy btn -->
                    <button class="btn next hide main-btn">Продовжити</button>
                </div>
                <div style="width: 100px; height: 100px; cursor: pointer;"  class="size1">9x13</div>
            </div>
        </main>
    </div>











   








	

<div id="result"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/0.8.1/cropper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="./js/main.js"></script>

    <script>
        window.onload = function() {
            let preloader = document.getElementById('loader-wrapper');
            // preloader.classList.add('visible');
            preloader.classList.add('hidden'), 400
      
        }
      </script>

      <script>
        let result = document.querySelector('.result'),
            img_result = document.querySelector('.img-result'),
            img_w = document.querySelector('.img-w'),
            img_h = document.querySelector('.img-h'),
            options = document.querySelector('.options'),
            save = document.querySelector('.save'),
            cropped = document.querySelector('.cropped'),
            dwn = document.querySelector('.download'),
            next = document.querySelector('.next'),
            upload = document.querySelector('#file-input'),
            size1 = document.querySelector('.size1'),
            cropperBox = document.querySelector('.cropper-crop-box'),
            cropper = '';
            upload.addEventListener('change', (e) => {
                if (e.target.files.length) {
                    const reader = new FileReader();
                    reader.onload = (e)=> {
                    if(e.target.result){
                                let img = document.createElement('img');
                                img.id = 'image';
                                img.src = e.target.result
                                result.innerHTML = '';
                        result.appendChild(img);
                                save.classList.remove('hide');
                                options.classList.remove('hide');
                                next.classList.remove('hide');

                                

                                function crop1() {
                                    // cropperBox.classList.add('style1');
                                    console.log(cropperBox)
                                }

                                size1.addEventListener('click', crop1);

                                cropper = new Cropper(img);

                    }
                    };
                    reader.readAsDataURL(e.target.files[0]);
                }
            });

            save.addEventListener('click',(e)=>{
            e.preventDefault();

            let imgSrc = cropper.getCroppedCanvas({
                    width: img_w.value 
                }).toDataURL();

                cropped.classList.remove('hide');
                img_result.classList.remove('hide');
                cropped.src = imgSrc;
                dwn.classList.remove('hide');
                dwn.download = 'cropped(drukphoto.com).png';
                dwn.setAttribute('href',imgSrc);
            });

            


      </script>
</body>
</html>